<!DOCTYPE html>
<html>
<head>
    <title>Video Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            plugins: [
                require('@tailwindcss/aspect-ratio'),
            ],
        }
    </script>
    <style>
        body { 
            margin: 0;
            padding: 0;
        }
        .video-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        .video-item {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 8px;
        }

        .video-info {
            margin-top: 10px;
        }

        .input-row {
            display: flex;
            gap: 35px;
            align-items: flex-end;
        }

        .prompt-wrapper {
            flex: 1;
        }

        .seed-wrapper {
            width: 100px;
        }
    </style>
</head>
<body class="bg-gray-50 flex justify-center">
    <div class="max-w-6xl w-full px-4 sm:px-6 lg:px-8 py-8">
        <h1 class="text-3xl font-bold mb-6">Video Generator</h1>
        <div class="form-group input-row">
            <div class="prompt-wrapper">
                <label for="prompt" class="block text-sm font-medium text-gray-700 mb-1">Enter your prompt:</label>
                <input type="text" id="prompt" value="puppies in a cloud, 4k" 
                       class="w-full p-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
            </div>
            <div class="seed-wrapper">
                <label for="seed" class="block text-sm font-medium text-gray-700 mb-1">Seed:</label>
                <input type="text" id="seed" placeholder="Optional" 
                       class="w-full p-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
            </div>
        </div>
        <button onclick="generateVideo()" 
                class="mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
            Generate Video
        </button>
        <div id="result" class="mt-4 text-gray-700"></div>
        <ul role="list" class="grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2 lg:grid-cols-3 xl:gap-x-8">
            <!-- Videos will be inserted here by the server -->
        </ul>
    </div>

    <script>
        async function generateVideo() {
            const resultDiv = document.getElementById('result');
            const prompt = document.getElementById('prompt').value;
            const seed = document.getElementById('seed').value;
            
            resultDiv.textContent = 'Generating video... (this may take a while)';
            
            try {
                const response = await fetch('/generate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ prompt, seed })
                });

                if (!response.ok) {
                    throw new Error('Video generation failed');
                }

                const data = await response.json();
                resultDiv.textContent = 'Video generated successfully!';
                
                const newVideoHtml = `
                    <li class="relative">
                        <div class="group block w-full overflow-hidden rounded-lg bg-gray-100 focus-within:ring-2 focus-within:ring-blue-500 focus-within:ring-offset-2 focus-within:ring-offset-gray-100">
                            <video controls class="w-full h-auto object-cover">
                                <source src="/videos/${data.filename}" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                        </div>
                        <p class="mt-2 block truncate text-sm font-medium text-gray-900">
                            ${data.prompt || 'No prompt provided'}
                        </p>
                        <p class="block text-sm font-medium text-gray-500">
                            Created: ${new Date().toLocaleDateString()}
                            ${data.seed ? `| Seed: ${data.seed}` : ''}
                        </p>
                    </li>
                `;
                
                const videoContainer = document.querySelector('.video-container');
                videoContainer.insertAdjacentHTML('afterbegin', newVideoHtml);
            } catch (error) {
                resultDiv.textContent = 'Error: ' + error.message;
            }
        }
    </script>
</body>
</html> 